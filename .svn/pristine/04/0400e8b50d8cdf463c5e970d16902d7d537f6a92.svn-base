<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<link rel="stylesheet" href="/resources/css/bootstrap.min.css">
<script src="/resources/js/jquery.min.js"></script>
<link rel="stylesheet" href="/resources/css/reset.css">
<link rel="stylesheet" href="/resources/css/main.css">
<style>
.form-inline {
	width: 250px;
}
.form-inline-sec {
	width: 150px;
}
.form-inline-thr {
	width: 150px;
}
.active {
	padding-left: 10px;   /* 좌측 여백 설정 */
  	padding-right: 10px;  /* 우측 여백 설정 */
}
</style>
<sec:authorize access="isAuthenticated()">
	<sec:authentication property="principal.userVO" var="userVO" />
</sec:authorize>

<div class="row" style="margin-bottom: 20px; margin-left: 1px;">
	<div class="col-lg-12">
		<h1 class="page-header">강의계획신청</h1>
	</div>
</div>
<div class="panel" style="margin-left: 1px;">
	<div id="contAreaBox">
		<div class="panel">
			<div class="panel-body">
				<form role="form" id="applyFrm" action="/professor/lectureapply/create?${_csrf.parameterName}=${_csrf.token}" method="post">
					<input type="hidden" id="userCd" name="approvalVO.userCd"
						value="${userVO.userCd}" /> 
					<input type="hidden" id="lecaTemp"
						name="lecaTemp" class="form-control" value="0" />
					<div class="table-responsive" style="text-align: center;">
						<table id="datatable-scroller"
							class="table table-bordered tbl_Form">
							<caption></caption>
							<colgroup>
								<col width="250px" />
								<col />
							</colgroup>
							<tbody class="lectbody">
								<tr class="tr1">
									<th class="active">강의명</th>
									<td class="form-inline"><input type="text" id="lecaNm"
										name="lecaNm" value=""
										class="form-control" style="width: 160px" /></td>
									<th class="active">작성자</th>
									<td class="form-inline-sec"><input type="text" id="userNm"
										name="userNm" value="" placeholder="${userVO.userNm}" readonly
										class="form-control" style="width: 110px" /></td>
									<th class="active">개설학년</th>
									<td class="form-inline-thr"><input type="number" id="lecaTrg"
										name="lecaTrg" value="" placeholder="" 
										class="form-control" style="width: 110px" /></td>
								</tr>
								<tr>
									<th class="active">년도</th>
									<td class="form-inline"><input type="number" id="lecaYear"
										name="lecaYear" value="" class="form-control"
										style="width: 160px" /></td>
									<th class="active">학기</th>
									<td class="form-inline-sec"><input type="number" id="lecaSem"
										name="lecaSem" value="" class="form-control"
										style="width: 110px" /></td>
									<th class="active">강의대상학과</th>
									<td class="form-inline-thr"><select name="depCd" class="form-control" style="width: 110px">
										<c:forEach var="departmentVO" items="${departmentVOList}">
											<option value="${departmentVO.depCd}">${departmentVO.depNm}</option>
										</c:forEach>
									</select></td>

								</tr>

								<tr>
									<th class="active">학점</th>
									<td class="form-inline"><input type="number" id="lecaCrd"
										name="lecaCrd" class="form-control" style="width: 160px" placeholder=""/></td>
									<th class="active">강의시수</th>
									<td class="form-inline-sec"><input type="number" id="lecaPer"
										name="lecaPer" class="form-control" style="width: 110px" placeholder=""/></td>
									<th class="active">정원</th>
									<td class="form-inline-thr"><input type="number" id="lecaCap"
										name="lecaCap" class="form-control" style="width: 110px" placeholder=""/></td>
<!-- 									<th class="active">내용</th> -->
<!-- 									<td class="form-inline"><textarea id="bdCon" name="bdCon" -->
<!-- 											cols="100" rows="10" class="form-control"></textarea></td> -->
								</tr>
								<tr>
									<th class="active">평가구분</th>
									<td class="form-inline"><select name="lecaEva" class="form-control" style="width: 160px">
											<option value="0" selected="selected">상대평가</option>
											<option value="1">절대평가</option>
									</select></td>
									<th class="active">전공유형</th>
									<td class="form-inline"><select name="lecaType" class="form-control" style="width: 110px">
											<option value="0" selected="selected">전공필수</option>
											<option value="1">전공선택</option>
											<option value="2">교양필수</option>
											<option value="3">교양선택</option>
									</select></td>
									<th class="active">강의실정보</th>
									<td class="form-inline-thr" colspan=""><select
										name="roomCd" class="form-control" style="width: 110px">
											<c:forEach var="roomVO" items="${roomVOList}">
												<option value="${roomVO.roomCd}">${roomVO.roomCd}</option>
											</c:forEach>
									</select></td>
								</tr>
								<tr>
									<th class="active">희망요일</th>
									<td colspan="2">
									<input type="checkbox" id="lecaScheC" name="lecaScheC" value="월요일" />월요일
									<input type="checkbox" id="lecaScheC" name="lecaScheC" value="화요일" />화요일
									<input type="checkbox" id="lecaScheC" name="lecaScheC" value="수요일" />수요일
									<input type="checkbox" id="lecaScheC" name="lecaScheC" value="목요일" />목요일
									<input type="checkbox" id="lecaScheC" name="lecaScheC" value="금요일" />금요일
									<input type="hidden" id="lecaSche" name="lecaSche" value="" />
									</td>
									
								</tr>
								
								<tr>
									<th class="active">강의시작시간</th>
									<td class="form-inline-sec"><select
										name="lecaStdt" class="form-control" style="width: 110px">
												<option value="9:00">9:00</option>
												<option value="11:00">10:00</option>
												<option value="10:00">11:00</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="14:00">14:00</option>
												<option value="15:00">15:00</option>
												<option value="16:00">16:00</option>
												<option value="17:00">17:00</option>
												<option value="18:00">18:00</option>
									</select></td>
									<th class="active">강의종료시간</th>
									<td class="form-inline-thr"><select
										name="lecaEddt" class="form-control" style="width: 110px">
												<option value="9:00">9:00</option>
												<option value="11:00">10:00</option>
												<option value="10:00">11:00</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="14:00">14:00</option>
												<option value="15:00">15:00</option>
												<option value="16:00">16:00</option>
												<option value="17:00">17:00</option>
												<option value="18:00">18:00</option>
									</select></td>
								</tr>
								<tr>
									<th class="active">교재 및 참고서</th>
									<td class="form-inline" colspan="5"><input type="text" id="lecaBook"
										name="lecaBook" class="form-control"  placeholder=""/></td>
								</tr>
								<tr>
									<th class="active">교과목 개요</th>
									<td class="form-inline" colspan="5"><textarea id="lecaCon" name="lecaCon" 
 											cols="100" rows="5" class="form-control"></textarea></td>
								</tr>
								<tr>
									<th class="active">비고</th>
									<td class="form-inline" colspan="5"><textarea id="lecaNote" name="lecaNote" 
 											cols="100" rows="5" class="form-control"></textarea></td>
								</tr>
			
							</tbody>
						</table>
					</div>
					<div style="margin-left: 1px;">
						<button type="button" class="btn btn-primary"
							id="realSubmitForm">등록</button>
						<button type="button" id="noSubmitForm" class="btn btn-danger">취소</button>
					</div>
					<sec:csrfInput />
				</form>
			</div>
		</div>
	</div>
</div>
	

<script type="text/javascript">

logout = function() {
	$("#logoutForm").submit();
}
$(function(){
	$("#realSubmitForm").on("click", function(){
		alertSuccess('신청완료');
		 
			var selectedDays = [];

		    // 폼 내의 모든 체크박스를 가져옴
		    var checkboxes = document.getElementsByName('lecaScheC');

		    // 체크박스를 순회하면서 선택된 요일을 배열에 추가
		    for (var i = 0; i < checkboxes.length; i++) {
		        if (checkboxes[i].checked) {
		            selectedDays.push(checkboxes[i].value);
		        }
		    }

		    // 선택된 요일들을 월요일/화요일/수요일 형식으로 결합
		    var result = selectedDays.join('/');
		    
		    document.getElementById('lecaSche').value = result;
			console.log(result);
		    // 결과 출력 또는 다른 작업 수행
		
		setTimeout(() => $("#applyFrm").submit(), 500);
	});
	
	$("#noSubmitForm").on("click", function(){
		alertError('신청취소');
		setTimeout(() => location.href="/professor/mypage", 500);
	});
	
});

</script>














